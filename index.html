<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JavaScript Quiz App</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div class="border border-dark container-lg container-box">
    <div class="container-lg container border border-dark">
      <h1 class="text-center title-quiz">Quiz App</h1>
      <div id="quiz"></div>
      <div id="result" class="result"></div>
      <div class="row row-cols-2">
        <button id="next" class="btn btn-primary btn-next col">Next</button>
        <button id="back" class="btn btn-primary btn-back col">Back</button>
        <button id="submit" class="btn btn-primary btn-submit col" style="display:none;">Submit</button>
        <button id="retry" class="btn btn-primary hide col btn-retry" style="display:none;">Retry</button>
      </div>
    </div>
  </div>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- Bootstrap JS Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const quizData = [{
      category: "Programming",
      questions: [
        {
          question: "Apakah Anda tertarik dengan pemrograman?",
          options: ["Sangat tertarik", "Tertarik", "Kurang tertarik", "Tidak tertarik"],
        },
        {
          question: "Apakah Anda tertarik dengan pengembangan web?",
          options: ["Sangat tertarik", "Tertarik", "Kurang tertarik", "Tidak tertarik"],
        },
        {
          question: "Apakah Anda tertarik dengan pengembangan permainan?",
          options: ["Sangat tertarik", "Tertarik", "Kurang tertarik", "Tidak tertarik"],
        },
      ]
    },
    {
      category: "Networking",
      questions: [
        {
          question: "Apakah Anda tertarik dengan jaringan komputer?",
          options: ["Sangat tertarik", "Tertarik", "Kurang tertarik", "Tidak tertarik"],
        },
        {
          question: "Apakah Anda tertarik dengan keamanan jaringan?",
          options: ["Sangat tertarik", "Tertarik", "Kurang tertarik", "Tidak tertarik"],
        },
        {
          question: "Apakah Anda tertarik dengan manajemen jaringan?",
          options: ["Sangat tertarik", "Tertarik", "Kurang tertarik", "Tidak tertarik"],
        },
      ]
    },
    {
      category: "Data Science",
      questions: [
        {
          question: "Apakah Anda tertarik dengan data science?",
          options: ["Sangat tertarik", "Tertarik", "Kurang tertarik", "Tidak tertarik"],
        },
        {
          question: "Apakah Anda tertarik dengan analisis data?",
          options: ["Sangat tertarik", "Tertarik", "Kurang tertarik", "Tidak tertarik"],
        },
        {
          question: "Apakah Anda tertarik dengan machine learning?",
          options: ["Sangat tertarik", "Tertarik", "Kurang tertarik", "Tidak tertarik"],
        },
      ]
    },
  ];
  
  const quizContainer = document.getElementById("quiz");
  const resultContainer = document.getElementById("result");
  const nextButton = document.getElementById("next");
  const submitButton = document.getElementById("submit");
  const retryButton = document.getElementById("retry");
  const backButton = document.getElementById("back");
  
  let currentCategory = 0;
  let currentQuestion = 0;
  let answers = {};
  
  function displayQuestion() {
    const categoryData = quizData[currentCategory];
    const questionData = categoryData.questions[currentQuestion];
  
    const questionElement = document.createElement("div");
    questionElement.className = "question";
    questionElement.innerHTML = questionData.question;
  
    const optionsElement = document.createElement("div");
    optionsElement.className = "row row-cols-2";
  
    for (let i = 0; i < questionData.options.length; i++) {
      const option = document.createElement("label");
      option.className = "option col";
  
      const radio = document.createElement("input");
      radio.type = "radio";
      radio.name = "quiz";
      radio.value = questionData.options[i];
  
      const optionText = document.createTextNode(questionData.options[i]);
  
      option.appendChild(radio);
      option.appendChild(optionText);
      optionsElement.appendChild(option);
    }
  
    quizContainer.innerHTML = "";
    quizContainer.appendChild(questionElement);
    quizContainer.appendChild(optionsElement);
  
    // Menyembunyikan tombol submit, menampilkan tombol next
    submitButton.style.display = "none";
    nextButton.style.display = "inline-block";
  
    if (currentQuestion > 0 || currentCategory > 0) {
        backButton.style.display = "inline-block";
      } else {
        backButton.style.display = "none";
      }
  
      const previousAnswer = answers[`${currentCategory}-${currentQuestion}`];
      if (previousAnswer) {
        const optionElement = document.querySelector(`input[name="quiz"][value="${previousAnswer}"]`);
        if (optionElement) {
          optionElement.checked = true;
        }
      }
  }
  
  function checkAnswer() {
      const selectedOption = document.querySelector('input[name="quiz"]:checked');
      if (selectedOption) {
        const answer = selectedOption.value;
        answers[`${currentCategory}-${currentQuestion}`] = answer;
        currentQuestion++;
        if (currentQuestion < quizData[currentCategory].questions.length) {
          displayQuestion();
        } else {
          currentCategory++;
          currentQuestion = 0;
          if (currentCategory < quizData.length) {
            displayQuestion();
          } else {
            displayResult();
          }
        }
      }
  }
  
  function previousQuestion() {
      if (currentQuestion > 0) {
        currentQuestion--;
      } else if (currentCategory > 0) {
        currentCategory--;
        currentQuestion = quizData[currentCategory].questions.length - 1;
      }
      displayQuestion();
    }
  
  
  function displayResult() {
    quizContainer.style.display = "none";
    nextButton.style.display = "none";
    submitButton.style.display = "none";
    retryButton.style.display = "inline-block";
    backButton.style.display = "none"; 
  
    // Hitung total nilai untuk setiap kategori
    const categoryScores = {};
    for (let key in answers) {
      const answer = answers[key];
      const category = quizData[Math.floor(key.split('-')[0])].category;
      const score = answer === "Sangat tertarik" ? 3 :
                    answer === "Tertarik" ? 2 :
                    answer === "Kurang tertarik" ? 1 :
                    0;
      categoryScores[category] = (categoryScores[category] || 0) + score;
    }
  
    // Tentukan kategori dengan nilai tertinggi
    let maxCategory = null;
    let maxScore = -Infinity;
    for (const category in categoryScores) {
      if (categoryScores[category] > maxScore) {
        maxScore = categoryScores[category];
        maxCategory = category;
      }
    }
  
    resultContainer.innerHTML = `<h1 class="text-center">${maxCategory}</h1>`;
  }
  
  function retryQuiz() {
    currentCategory = 0;
    currentQuestion = 0;
    answers = {};
    quizContainer.style.display = "block";
    nextButton.style.display = "inline-block";
    submitButton.style.display = "none";
    retryButton.style.display = "none";
    resultContainer.innerHTML = "";
    displayQuestion();
  }
  
  function nextQuestion() {
      const selectedOption = document.querySelector('input[name="quiz"]:checked');
      if (selectedOption) {
        const answer = selectedOption.value;
        answers[`${currentCategory}-${currentQuestion}`] = answer; // Simpan jawaban berdasarkan kategori dan pertanyaan
        currentQuestion++;
        if (currentQuestion < quizData[currentCategory].questions.length) {
          displayQuestion();
        } else {
          currentCategory++;
          currentQuestion = 0;
          if (currentCategory < quizData.length) {
            displayQuestion();
          } else {
            displayResult();
          }
        }
      }
  }
  
  
    nextButton.addEventListener("click", nextQuestion);
    backButton.addEventListener("click", previousQuestion); // event listener baru
    submitButton.addEventListener("click", checkAnswer);
    retryButton.addEventListener("click", retryQuiz);
  
    displayQuestion();
  
  </script>
  
  
</body>
</html>